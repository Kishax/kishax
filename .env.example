# ===================================
# MC Server Configuration (i-a, EC2)
# ===================================

# Overall Memory Configuration
OVERALL_MEMORY=8.0

# MySQL Configuration (RDS MySQL)
MYSQL_HOST=<RDS MySQL Endpoint from terraform output>
MYSQL_DATABASE=mc
MYSQL_USER=admin
MYSQL_PASSWORD=<from terraform.tfvars>

# Seed Control (production: skip seeds, development: load seeds)
SEED_ENV=production

# Auth API Configuration (i-b)
# Note: Get i-b Private IP from terraform output: api_server_private_ip
# CONFIRM_URL is auto-generated from AUTH_API_URL as: ${AUTH_API_URL}/mc/auth
AUTH_API_URL=http://<i-b-private-ip>:8080
AUTH_API_KEY=<Generate or get from SSM Parameter Store>

# AWS SQS Configuration
AWS_REGION=ap-northeast-1
MC_WEB_SQS_ACCESS_KEY_ID=<from SSM: /kishax/production/sqs/access-key-id>
MC_WEB_SQS_SECRET_ACCESS_KEY=<from SSM: /kishax/production/sqs/secret-access-key>
TO_WEB_QUEUE_URL=<from terraform output: to_web_queue_url>
TO_MC_QUEUE_URL=<from terraform output: to_mc_queue_url>
TO_DISCORD_QUEUE_URL=<from terraform output: discord_queue_url>

# Redis Configuration (i-b host Redis #1)
# Note: Get i-b Private IP from terraform output: api_server_private_ip
REDIS_URL=redis://<i-b-private-ip>:6379
REDIS_CONNECTION_TIMEOUT=5000
REDIS_COMMAND_TIMEOUT=3000

# Queue Configuration
QUEUE_MODE=MC
SQS_WORKER_ENABLED=true
SQS_WORKER_POLLING_INTERVAL_SECONDS=5
SQS_WORKER_MAX_MESSAGES=10
SQS_WORKER_WAIT_TIME_SECONDS=20
SQS_WORKER_VISIBILITY_TIMEOUT_SECONDS=30

# Logging Configuration
LOG_LEVEL=INFO

# ================================================
# MC Plugin Build & Deployment Configuration
# ================================================

# EC2デプロイ時に毎回MCプラグインをビルドするか
# true: EC2でGradleビルドを実行（時間がかかるが最新のコードを確実に反映）
# false: S3から事前ビルド済みのJARをダウンロード（推奨、高速）
MC_BUILD_ON_DEPLOY=false

# EC2デプロイ時にkishax-apiを再インストールするか
# true: apps/apiでmvn installを実行してローカルMavenリポジトリを更新
# false: 既存のローカルMavenリポジトリを使用
API_INSTALL_ON_DEPLOY=false

# S3バケット名（MCプラグインJARの保存先）
S3_BUCKET=kishax-production-docker-images

# 使用シナリオ:
# 【開発環境（推奨）】MC_BUILD_ON_DEPLOY=false, API_INSTALL_ON_DEPLOY=false
# 【緊急ホットフィックス】MC_BUILD_ON_DEPLOY=true, API_INSTALL_ON_DEPLOY=true
